---
title: "ツールバー"
description: "この記事では、Xamarin.Mac アプリケーションのツールバーの扱いについて説明します。 Xcode およびインターフェイスのビルダー、それらをコードに公開して、それらをプログラムによって操作の作成と保守のツールバーを説明します。"
ms.topic: article
ms.prod: xamarin
ms.assetid: C8D228CE-C860-47E1-85FD-69864BF91F20
ms.technology: xamarin-mac
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/14/2017
ms.openlocfilehash: 92b90f8d4655ea89b67e81f3235b6fd9b6d92833
ms.sourcegitcommit: 30055c534d9caf5dffcfdeafd6f08e666fb870a8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/09/2018
---
# <a name="toolbars"></a>ツールバー

_この記事では、Xamarin.Mac アプリケーションのツールバーの扱いについて説明します。Xcode およびインターフェイスのビルダー、それらをコードに公開して、それらをプログラムによって操作の作成と保守のツールバーを説明します。_

Mac 用 Visual Studio で作業している Xamarin.Mac 開発者は、Xcode、ツール バー コントロールを含む操作 macOS 開発者が利用できる同じ UI コントロールにアクセス権を持ちます。 Xamarin.Mac は、Xcode と直接統合、ために、Xcode のインターフェイスのビルダーを使用して作成し、ツールバーのアイテムを管理することができます。 これらのツールバー項目は、C# の場合も作成できます。

MacOS でツールバーは、ウィンドウの上部のセクションに追加し、その機能に関連するコマンドに簡単にアクセスを提供します。 ツールバーしたりすること非表示、表示、アプリケーションのユーザーによってカスタマイズさまざまな方法でツールバー項目を表示することができます。

この記事では、ツールバーとツールバー項目 Xamarin.Mac アプリケーションでの操作の基礎について説明します。 

目を通して、続行する前に、[こんにちは, Mac](~/mac/get-started/hello-mac.md)記事 — 具体的には、 [Xcode とインターフェイスのビルダーの概要を](~/mac/get-started/hello-mac.md#Introduction_to_Xcode_and_Interface_Builder)と[コンセントとアクション](~/mac/get-started/hello-mac.md#Outlets_and_Actions)のセクションでは — ので主要な概念とこのガイド全体で使用される手法について説明します。

見ても、 [c# を公開するクラス/OBJECTIVE-C メソッド](~/mac/internals/how-it-works.md)のセクションで、 [Xamarin.Mac 内部](~/mac/internals/how-it-works.md)ドキュメント。 について説明します、`Register`と`Export`Objective C のクラスを c# クラスの接続に使用される属性です。

## <a name="introduction-to-toolbars"></a>ツールバーの概要

MacOS アプリケーションのいずれかのウィンドウには、ツールバーを含めることができます。

![ツールバーで、例ウィンドウ](toolbar-images/info01.png "ツールバーで、例ウィンドウ")

ツールバーにすばやくアクセスできる重要なアプリケーションのユーザーまたは一般的に使用される機能の簡単な方法を提供します。 たとえば、ドキュメントの編集のアプリケーションでは、テキストの色を設定、フォントを変更または現在のドキュメントを印刷するためのツールバー項目を提供可能性があります。

ツールバーは、3 つの方法で項目を表示できます。

1. **アイコンとテキスト** 

     ![アイコンとテキストを含むツールバー](toolbar-images/info02.png "アイコンとテキストを含むツールバー")

2. **アイコンのみ** 

     ![アイコン専用のツールバー](toolbar-images/info03.png "アイコン専用のツールバー")

3. **テキストのみ** 

     ![テキストのみツールバー](toolbar-images/info04.png "テキストのみのツールバー")

ツールバーを右クリックし、コンテキスト メニューから表示モードを選択すると、これらのモードの間で切り替えます。

![コンテキスト メニュー、ツールバーの](toolbar-images/info05.png "ツールバーのコンテキスト メニュー")

小さなサイズでツールバーを表示するのにには、同じメニューを使用します。

![小さいアイコンを含むツールバー](toolbar-images/info06.png "小さいアイコンを含むツールバー")

ツールバーをカスタマイズするため、メニューもできます。

![ツールバーをカスタマイズするために使用するダイアログ](toolbar-images/info07.png "ツールバーをカスタマイズするために使用する ダイアログ")

Xcode のインターフェイスのビルダーのツールバーをセットアップするときに、開発者は、既定の構成の一部ではない余分なツールバー項目を指定できます。 アプリケーションのユーザーを追加して、必要に応じてこれらの事前定義された項目を削除するツールバーをカスタマイズできます。 もちろん、ツールバーは、その既定の構成にリセットできます。

ツールバーが自動的に接続する、**ビュー**メニューで、非表示に、表示、およびそれをカスタマイズすることができます。

![[表示] メニュー内のアイテムのツールバーに関連する](toolbar-images/info08.png "表示 メニュー内のアイテムのツールバーに関連します。")

参照してください、 [ メニューの機能が組み込まれて](~/mac/user-interface/menu.md)詳細についてはドキュメントです。

さらに、ツールバーは、インターフェイスのビルダーで正しく構成されている場合は、アプリケーションに複数回起動するアプリケーション間でのツールバーのカスタマイズは維持自動的に。

このガイドの次のセクションでは、作成し、Xcode のインターフェイスのビルダーのツールバーを管理する方法とコード内で操作する方法について説明します。

## <a name="setting-a-custom-main-window-controller"></a>カスタムのメイン ウィンドウのコント ローラーを設定

コンセントとアクション、Xamarin.Mac アプリを使用して c# コードを UI 要素を公開するためには、カスタム ウィンドウ コント ローラーを使用する必要があります。

1. Xcode のインターフェイスのビルダーで、アプリのストーリー ボードを開きます。
2. デザイン画面で、ウィンドウのコント ローラーを選択します。
3. 切り替えて、 **Identity インスペクター**として"WindowController"を入力し、**クラス名**: 

    [![ウィンドウのコント ローラーのカスタム クラス名を設定する](toolbar-images/windowcontroller01.png "ウィンドウ コント ローラーのカスタム クラス名の設定")](toolbar-images/windowcontroller01-large.png#lightbox) 

4. 変更内容を保存し、同期する Mac 用の Visual Studio に戻ります。
5. A **WindowController.cs**ファイルは、プロジェクトに追加する、**ソリューション パッド**Mac 用の Visual Studio で。 

    ![ソリューション パッドで WindowController.cs を選択すると](toolbar-images/windowcontroller02.png "ソリューション パッドで WindowController.cs を選択します。")

6. Xcode のインターフェイスのビルダーでストーリー ボードを再度開きます。
7. **WindowController.h**ファイルが使用できるようになります。 

    [![WindowController.h ファイル](toolbar-images/windowcontroller03.png "WindowController.h ファイル")](toolbar-images/windowcontroller03-large.png#lightbox)

## <a name="creating-and-maintaining-toolbars-in-xcode"></a>作成して、Xcode でツールバーを維持します。

ツールバーでは、作成して、Xcode のインターフェイスのビルダーを使って管理することができます。 にアプリケーションを、ツールバーを追加するアプリの主要なストーリー ボードを編集します (ここでは**Main.storyboard**) でダブルクリックして、**ソリューション パッド**:

![ソリューション パッドで Main.storyboard を開く](toolbar-images/edit01.png "ソリューション パッドで Main.storyboard を開く")

**ライブラリ インスペクター**、「ツール」で入力、**検索ボックス**見やすくするすべての利用可能なツールバー項目を参照してください。

![ツールバー項目を表示するフィルター選択されたライブラリ インスペクター](toolbar-images/edit02.png "ライブラリ インスペクターをフィルター処理がツールバー項目を表示")

ツールバーをウィンドウにドラッグ、**インターフェイス エディター**です。 ツールバーでは、選択されている、その動作を構成でプロパティを設定、**属性インスペクター**:

![属性インスペクターのツールバーに](toolbar-images/edit04.png "ツールバーの 属性インスペクター")

使用できるプロパティは次のとおりです。

1. **表示**のツールバーには、アイコン、テキスト、またはその両方が表示されるかどうかを制御します。
2. **起動時に表示されている**-選択した場合、ツールバー、既定では表示します。
3. **カスタマイズ可能な**-選択した場合、ユーザーは編集およびツールバーをカスタマイズします。
4. **区切り記号**-選択した場合、細い線が水平がウィンドウの内容から、ツールバーを分離します。
5. **サイズ**-ツールバーのサイズを設定
6. **自動保存**-選択した場合、アプリケーションは維持、ユーザーのツールバーの構成の変更アプリケーションが起動します。

選択、**自動保存**オプションを選択し、既定の設定で、その他のすべてのプロパティのままにします。 

ツールバーを開いた後、**インターフェイス階層**、ツールバー項目を選択してカスタマイズ ダイアログを表示します。

![ツールバーのカスタマイズ](toolbar-images/edit05.png "ツールバーのカスタマイズ")

このダイアログ ボックスを使用して、デザイン、アプリケーションの既定のツールバーに、ツールバーの一部になっている項目のプロパティを設定して、ユーザーがツールバーをカスタマイズするときに選択するための余分なツールバー項目を提供します。 ツールバーに項目を追加するにドラッグしてから、**ライブラリ インスペクター**:

![ライブラリ インスペクター](toolbar-images/edit06.png "ライブラリ インスペクター")

次のツールバー項目を追加できます。

- **イメージのツールバー項目**-アイコンとしてカスタム イメージを含むツールバー項目。
- **柔軟な容量ツールバー項目**の柔軟な容量が後続のツールバー項目を正当化するために使用します。 たとえば、柔軟な容量ツールバー項目で 1 つまたは複数のツールバー項目の後に、別のツールバー項目は、ツールバーの右側にある最後のアイテムをピン留めとします。
- **ツールバー項目をスペース**-固定のツールバーの項目間のスペース
- **区切り記号のツールバー項目**にグループ化のため、2 つまたは複数のツールバー項目間に表示されている区切り記号
- **ツールバー項目をカスタマイズ**-ツールバーをカスタマイズすることができます
- **ツールバー項目を印刷**の開いているドキュメントを印刷することができます
- **色のツールバー項目を表示する**-標準のシステム カラー ピッカーが表示されます。 

     ![システム カラー ピッカー](toolbar-images/edit07.png "システム カラー ピッカー")

- **フォント ツールバー項目を表示する**-標準のシステムの [フォント] ダイアログ ボックスが表示されます。 

     ![フォント セレクター](toolbar-images/edit08.png "フォント セレクター")

> [!IMPORTANT]
> 後で表示されるが、検索のフィールドやセグメント化されたコントロールは、水平スライダーなどの多くの標準 Cocoa UI コントロールは、ツールバーにも追加できます。

### <a name="adding-an-item-to-a-toolbar"></a>ツールバーに、項目の追加

ツールバーに項目を追加するには、ツールバーでを選択、**インターフェイス階層**カスタマイズ ダイアログを表示するを原因と、その項目のいずれかをクリックします。 新しい項目を次に、ドラッグ、**ライブラリ インスペクター**を**ツールバー項目の許可**領域。

![ツールバーの [カスタマイズ] ダイアログ ボックスの許可されているツールバー項目](toolbar-images/add01.png "ツールバーの [カスタマイズ] ダイアログ ボックスの 許可されているツールバー項目")

新しい項目が既定のツールバーの一部であることを確認するには、ドラッグして、**既定ツールバー項目**領域。 

![ツールバー項目をドラッグして並べ替え](toolbar-images/add02.png "はツールバー項目をドラッグすることで並べ替え")

既定のツールバー項目を並べ替えるには、ドラッグ左または右にします。

次に、使用、**属性インスペクター**項目の既定のプロパティを設定します。

![属性の設定を使用してツールバー項目をカスタマイズする](toolbar-images/add03.png "属性インスペクターを使用してツールバー項目をカスタマイズします。")

使用できるプロパティは次のとおりです。

- **イメージ名**-項目のアイコンとして使用するイメージ
- **ラベル**-ツールバー内で項目を表示するテキスト
- **パレット ラベル**-内で項目を表示するテキスト、**ツールバー項目の許可**領域
- **タグ**-コード内の項目を識別するのに役立つ、オプションの一意の識別子。
- **識別子**の定義のツールバー項目の種類。 コードではツールバー項目を選択する、カスタム値を使用できます。
- **選択可能な**のオン/オフ ボタンのようにアイテムが機能する場合はオンになっている。

> [!IMPORTANT]
> 項目を追加、**ツールバー項目の許可**領域がユーザーのカスタマイズのオプションを提供する既定値 ツールバーではありません。 

### <a name="adding-other-ui-controls-to-a-toolbar"></a>ツールバーに他の UI コントロールを追加します。

などのいくつかの Cocoa UI 要素は、フィールドを検索し、ツールバーにセグメント化されたコントロールを追加することもします。

これには、開く、ツールバーで、**インターフェイス階層**カスタマイズ ダイアログを開くにはツールバー項目を選択します。 ドラッグ、**検索フィールド**から、**ライブラリ インスペクター**を**ツールバー項目の許可**領域。

![ツールバーのカスタマイズ ダイアログを使用して](toolbar-images/add05.png "ツールバーのカスタマイズ ダイアログを使用します。")

ここには、インターフェイスのビルダーを使用して検索フィールドを構成し、アクションまたはコンセントを使用してコードに公開します。

## <a name="built-in-toolbar-item-support"></a>組み込みのツールバー項目のサポート

Cocoa UI 要素がいくつかは、既定では、標準ツールバーの項目と対話します。 たとえば、ドラッグ、**テキスト ビュー**アプリケーションのウィンドウの上にし、コンテンツ領域に合わせて配置。

[![テキスト ビューをアプリケーションに追加する](toolbar-images/edit09.png "テキスト ビューをアプリケーションに追加します。")](toolbar-images/edit09-large.png#lightbox)

Xcode での同期、アプリケーションを実行、いくつかのテキストを入力、選択し、をクリックをする Mac 用の Visual Studio に戻り、文書を保存、**色**ツールバー項目。 カラー ピッカーを使用して、テキスト ビューが自動的に動作することを確認します。

![テキスト ビューおよびカラー ピッカーを使用して組み込みのツールバー機能](toolbar-images/edit10.png "テキスト ビューおよびカラー ピッカーを使用して組み込みのツールバーの機能")

## <a name="using-images-with-toolbar-items"></a>ツールバー項目を含むイメージを使用します。

使用して、**イメージ ツールバー項目**、任意のビットマップ イメージに追加された、**リソース**フォルダー (のビルド アクションを指定して**バンドル リソース**)、ツールバーのアイコンとして表示されることができます。

1. Mac 用の Visual Studio での**ソリューション パッド**を右クリックし、**リソース**フォルダーを選択**追加** > **ファイルの追加**.
2. **ファイルを追加** ダイアログ ボックスし、目的の画像に移動して選択してをクリックして、**開く**ボタンをクリックします。 

    [![追加するイメージを選択すると](toolbar-images/edit11.png "を追加するイメージを選択します。")](toolbar-images/edit11-large.png#lightbox)

3. 選択**コピー**、確認**同じアクションを使用して、選択したすべてのファイルの**、 をクリック**OK**:

    ![追加したイメージのコピー操作を選択して](toolbar-images/edit12.png "追加イメージに対するコピー操作の選択")

4. **ソリューション パッド**をダブルクリックして**MainWindow.xib**を Xcode で開きます。

5. [ツールバー] を選択、**インターフェイス階層**カスタマイズ ダイアログを開くには、その項目のいずれかをクリックします。

6. ドラッグ、**イメージ ツールバー項目**から、**ライブラリ インスペクター**をツールバーの**ツールバー項目の許可**領域。 

    ![イメージのツールバー項目はツールバー項目の許可 領域に追加](toolbar-images/edit14.png "イメージのツールバー項目はツールバー項目の許可 領域に追加")

7. **属性インスペクター**Mac を Visual Studio で追加されたイメージを選択します。 

    ![ツールバー項目をカスタム イメージを設定する](toolbar-images/edit15.png "はツールバー項目をカスタム イメージを設定します。")

8. 設定、**ラベル**「ゴミ箱」に、**パレット ラベル**「ドキュメントの消去」。 

    ![ツールバーの設定項目のラベルとラベルのパレット](toolbar-images/edit16.png "ラベルとパレット ラベル アイテムのツールバーの設定")

9. ドラッグ、**区切りツールバー項目**から、**ライブラリ インスペクター**をツールバーの**ツールバー項目の許可**領域。 

    [![区切り記号のツールバー項目はツールバー項目の許可 領域に追加](toolbar-images/edit17.png "A 区切り記号のツールバーの項目はツールバー項目の許可 領域に追加")](toolbar-images/edit17-large.png#lightbox)

10. 区切り記号アイテムと「ゴミ箱」のアイテムをドラッグして、**ツールバー項目の既定の**領域とセットから項目をツールバーの順序が左から右 (色、フォント、区切り記号、ごみ箱、柔軟な空き領域、印刷) を次のようにします。 

    ![既定のツールバー項目](toolbar-images/edit18.png "は既定のツールバー項目")

11. 変更を保存し、Xcode と同期する Mac 用の Visual Studio に戻ります。

既定では、新しいツールバーが表示されていることを確認するアプリケーションを実行します。

![カスタマイズした既定の項目を含むツールバー](toolbar-images/edit19.png "カスタマイズした既定の項目を含むツールバー")

## <a name="exposing-toolbar-items-with-outlets-and-actions"></a>コンセントとアクションのツールバー項目を公開します。

ツールバーまたはコードでツールバー項目にアクセスするにコンセントまたはアクションをアタッチする必要があります。

1. **ソリューション パッド**をダブルクリックして**Main.storyboard**を Xcode で開きます。
2. カスタム クラス"WindowController"は、メイン ウィンドウのコント ローラーに割り当てられていることを確認、 **Identity インスペクター**:

    [![Identity インスペクターを使用して、ウィンドウのコント ローラーのカスタム クラスを設定する](toolbar-images/edit20a.png "Identity インスペクターを使用して、ウィンドウのコント ローラーのカスタム クラスを設定するには")](toolbar-images/edit20a-large.png#lightbox)

3. 次に、ツールバーのアイテムを選択、**インターフェイス階層**: 

    ![インターフェイス階層内のツールバー項目を選択すると](toolbar-images/edit20.png "インターフェイス階層内のツールバー項目を選択します。")  

4. 開く、**アシスタント ビュー**、select、 **WindowController.h**ファイル、およびコントロールをドラッグするツールバー項目から、 **WindowController.h**ファイル。
5. 設定、**接続**に入力**アクション**の"trashDocument"を入力、**名前**、 をクリックし、**接続**ボタン。 

    [![ツールバー項目のアクションを設定する](toolbar-images/edit23.png "はツールバー項目のアクションを設定します。")](toolbar-images/edit23-large.png#lightbox)

6. 公開、**テキスト ビュー** "documentEditor"と呼ばれるコンセントとして、 **ViewController.h**ファイル。 

    [![テキスト ビューのコンセントを構成する](toolbar-images/edit24.png "テキスト ビューのコンセントを構成します。")](toolbar-images/edit24-large.png#lightbox)

7. 変更内容を保存し、Xcode と同期する Mac 用の Visual Studio に戻ります。

Mac 用 Visual Studio で編集、 **ViewController.cs**ファイルし、次のコードを追加します。

```csharp
public void EraseDocument() {
    documentEditor.Value = "";
}
```

次に、編集、 **WindowController.cs**ファイルし、の下位に次のコードを追加、`WindowController`クラス。

```csharp
[Export ("trashDocument:")]
void TrashDocument (NSObject sender) {

    var controller = ContentViewController as ViewController;
    controller.EraseDocument ();
}
```

アプリケーションを実行するときに、**ゴミ箱**ツールバー項目をアクティブにします。

![ツールバーの項目にアクティブなゴミ箱](toolbar-images/edit25.png "ごみ箱のアクティブな項目を含むツールバー")

注意して、**ゴミ箱**テキストを削除するツールバー項目を使用するようになりました。

## <a name="disabling-toolbar-items"></a>ツールバー項目を無効にします。

ツールバーにある項目を無効にするには、カスタムを作成`NSToolbarItem`クラスし、オーバーライド、`Validate`メソッドです。 次に、インターフェイス ビルダーでは、有効または無効にする項目にカスタムの型を割り当てます。

カスタムを作成する`NSToolbarItem`クラス、プロジェクトを右クリックし [**追加** > **新しいファイル.**.選択**全般** > **空のクラス**の"ActivatableItem"を入力、**名前**、] をクリックし、**新規**ボタン。 

![Mac 用の Visual Studio で空のクラスを追加する](toolbar-images/custom01.png "Mac 用の Visual Studio で空のクラスを追加します。")

次に、編集、 **ActivatableItem.cs**次のように読み取るファイル。

```csharp
using System;

using Foundation;
using AppKit;

namespace MacToolbar
{
    [Register("ActivatableItem")]
    public class ActivatableItem : NSToolbarItem
    {
        public bool Active { get; set;} = true;

        public ActivatableItem ()
        {
        }

        public ActivatableItem (IntPtr handle) : base (handle)
        {
        }

        public ActivatableItem (NSObjectFlag  t) : base (t)
        {
        }

        public ActivatableItem (string title) : base (title)
        {
        }

        public override void Validate ()
        {
            base.Validate ();
            Enabled = Active;
        }
    }
}
```

ダブルクリックして**Main.storyboard**を Xcode で開きます。 選択、**ゴミ箱**ツールバー項目を選択し、上記で作成した"ActivatableItem"をそのクラスに変更、 **Identity インスペクター**:

![ツールバー項目のカスタム クラスを設定](toolbar-images/custom02.png "はツールバー項目のカスタム クラスを設定")

呼ばれるコンセントを作成する`trashItem`の**ゴミ箱**ツールバー項目。 変更を保存し、Xcode と同期する Mac 用の Visual Studio に戻ります。 最後に、開いて**MainWindow.cs**し、更新、`AwakeFromNib`次のようにメソッド。

```csharp
public override void AwakeFromNib ()
{
    base.AwakeFromNib ();

    // Disable trash
    trashItem.Active = false;
}
```

アプリケーションを実行して、**ゴミ箱**ツールバーの項目が無効になります。

![ツールバーの項目に非アクティブなゴミ箱](toolbar-images/custom03.png "ゴミ箱を非アクティブな項目を含むツールバー")

## <a name="summary"></a>まとめ

この記事では、ツールバーとツールバー項目 Xamarin.Mac アプリケーションでの操作についての詳細を取得しました。 これは、作成し、Xcode のインターフェイスのビルダーのツールバーを管理する方法、一部の UI コントロールに自動的にしくみツールバー項目を含む、c# コードでツールバーを操作する方法およびツールバー項目を無効にする方法について説明します。


## <a name="related-links"></a>関連リンク

- [MacToolbar (サンプル)](https://developer.xamarin.com/samples/mac/MacToolbar/)
- [Hello Mac](~/mac/get-started/hello-mac.md)
- [ツールバーのヒューマン インターフェイス ガイドライン](https://developer.apple.com/macos/human-interface-guidelines/windows-and-views/toolbars/)
- [ツールバーの概要](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Toolbars/Toolbars.html)
