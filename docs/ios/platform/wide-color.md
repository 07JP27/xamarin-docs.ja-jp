---
title: 広色
description: この記事では、広色と Xamarin.iOS または Xamarin.Mac アプリでの使用方法について説明します。
ms.prod: xamarin
ms.assetid: 576E978A-F182-489A-83E4-D8CDC6890B24
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/17/2017
ms.openlocfilehash: 5f56b396715159cbc1539ae9a7f30cc7ad2236bf
ms.sourcegitcommit: 945df041e2180cb20af08b83cc703ecd1aedc6b0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/04/2018
---
# <a name="wide-color"></a>広色

_この記事では、広色と Xamarin.iOS または Xamarin.Mac アプリでの使用方法について説明します。_

iOS 10 や macOS Sierra 拡張範囲のピクセル形式とコア グラフィックス、Core のイメージ、金属および AVFoundation などのフレームワークを含む、システム全体で全体の色域スペースのサポートを強化します。 ワイド カラー ディスプレイを使用したデバイスのサポートはさらに、グラフィック スタック全体におけるこの動作を提供することにより容易になります。

## <a name="about-wide-color"></a>広色について

前述のように、iOS 10 や macOS Sierra 拡張範囲のピクセル形式とコア グラフィックス、Core のイメージ、金属および AVFoundation などのフレームワークを含む、システム全体で全体の色域スペースのサポートを強化します。 ワイド カラー ディスプレイを使用したデバイスのサポートはさらに、グラフィック スタック全体におけるこの動作を提供することにより容易になります。

年代 Apple 作成 ColorSync mac 上で処理する色を処理するには それらも役に立ちます、国際色 Consortium (ICC) を作成し、一連のコンピューターのハードウェア上の色を処理するための標準の昇格を検出します。 ICC と Apple の作業が ColorSync に含まれていたおよび OS X (macOS と呼ばれるようになりました) のコア内に構築しました。

Apple も表示テクノロジ Retina ディスプレイ、新しい P3 を表示および表示 P3 色空間 (2015年では、ラップトップのサポートでリリースされた) などのハードウェアとの最前線にされ、iPad、iPhone 7 と 7 iPhone で表示されます、TrueTone とします。

MacOS Sierra で広色と iOS 10 では、Apple は macOS と iOS の両方が、これらの新しい表示テクノロジを最大限に活用する色を処理する方法を変更します。

## <a name="core-color-concepts"></a>主要な色の概念

次の中核となる色概念は、macOS および iOS で色を掘り下げるを実行する前に対応する必要があります。

### <a name="color-space"></a>色空間

色空間とは、環境の色を表すし、比較します。 色成分の強度によって定義されている、1 ~ 4 次元空間があります。 

[![](wide-color-images/color00.png "色空間")](wide-color-images/color00.png#lightbox)

### <a name="color-channels"></a>カラー チャネル

色の要素は、カラー チャネルと呼びますことができます。 使い慣れた表記の一部は、RGB スペース、灰色のスペース、CMYK スペースまたはデバイスの独立したスペースになります。 

[![](wide-color-images/color02.png "色の要素も呼ばれますにカラー チャネルとして")](wide-color-images/color02.png#lightbox)

### <a name="color-primaries"></a>色のプライマリ

色のプライマリを比較し、色を計算するために使用する座標系を提供します。 通常、色のプライマリには、カラー チャネル内で生成できる、指定された色の最も負荷の高いバージョンが分けられます。

[![](wide-color-images/color01.png "色のプライマリを比較し、色を計算するために使用する座標系の指定します。")](wide-color-images/color01.png#lightbox)

場合は上で表される、RGB 色空間では、色のプライマリが where、`1.0`座標はアンカー (など`[1.0, 0.0, 0.0]`赤の)。

### <a name="color-gamut"></a>色域

色域は、すべての付与色空間内の個々 のカラー チャネルの組み合わせとして定義できるカラーを指します。

[![](wide-color-images/color03.png "色域例")](wide-color-images/color03.png#lightbox)

## <a name="what-is-wide-color"></a>広色は、新機能

広色のトピックをカバーする前に、現在の業界標準の色、標準の RGB 色空間 (sRGB) に関するディスカッションのもと必要があります。 現在の計算に最も広く使用されている色空間と、iOS や macOS の既定のカラー スペースがします。

SRGB 色空間では、次のプロパティがあります。

- ITU-R BT.709 標準に基づいています。
- 2.2 のおおよそのガンマ値を持ちます。
- これは、一般的な照明条件 (D65) を表します。

SRGB は業界で使用されている開発者は、これによって前提条件を広くために表示される任意のデバイスで指定された色を忠実に表されます。 ただし、この常にできない場合。 また、特定の sRGB 色領域に適合しないと、そのためで表せないそれをいくつかの色が使用されます。

たとえば、多くのインクと sRGB 外フォール染料を使用してスレッドを持つ多く繊維が設計されています。 ユーザーが、毎日の生活が発生した多くの製品は、鮮明な明るい色 sRGB 色空間の外部に作成されます。 一部の最も優れた sRGB では表現できない色の例は、日没、秋リーフ、特別な花および tropical 海のような性質を持つことです。

RAW 形式でデジタル画像がキャプチャされているユーザーは、sRGB 色空間で正しく表現できない、下げてできません正しく画面に表示される場合でも、この色データのすべてが含まれている自分のデバイスでイメージがあります。

### <a name="the-display-p3-color-space"></a>表示 P3 色空間

2015 は、Apple は、新しい (ラップトップ サポートおよび iPad Pro 9.7") を提供する製品の色空間 sRGB によって作成された問題を処理する新しい表示 P3 色空間を解放します。

[![](wide-color-images/color04.png "新しい表示 P3 色空間")](wide-color-images/color04.png#lightbox)

表示 P3 の色領域には、次のプロパティがあります。

- 最新のハードウェア プラットフォームをワイドのカラー スペースをサポートします。
- SMPTE DCI P3 標準に基づいています。 DCI P3 デジタル プロジェクターのために設計されたは、モニターをサポートするために Apple によって変更されました。
- 2.2 のおおよそのガンマ値を持ちます。
- これは、一般的な照明条件 (D65) を表します。

Apple にに従ってときは、自分のモバイル プラットフォームにユーザーが、ワークフローを移動しています。 単ワイド色の表示を含めて、必要なプロフェッショナルなモバイル デバイス (iPad 担当者) で sRGB によって提示される色プレゼンテーション問題を解決します。 ファクトリ確保することをデバイスにデバイスから、色の表示が正確で一貫性のある各デバイスの調整が完了するために、工場出荷時の調整をアップグレードすると、ソリューションの 1 つでした。

別のソリューションは、Apple は iOS 10 や macOS Sierra 組み込まれた完全、システム全体の色の管理を含めることです。 

### <a name="the-extended-range-srgb-color-space"></a>拡張範囲 sRGB 色空間

新しい iOS 10 システム全体の色の管理は、構築され、sRGB を微調整する既存の iOS アプリのすべてのアカウントがします。 これらのアプリのいずれかの色表現またはアプリ パフォーマンスに影響していないことを確認することがあります。

このような状況を処理するには、Apple にが 10、iOS での拡張範囲 sRGB 色空間 (および macOS の Sierra) に含まれます。

拡張範囲 sRGB 色空間では、次のプロパティがあります。

- すべての同じ sRGB 原色を備えています。
- 2.2 のおおよそのガンマ値を持ちます。
- これは、一般的な照明条件 (D65) を表します。
- 負の値をサポートし、1 (1) よりも大きい値します。

0 より小さい値を許可して、1 を超える色空間は、既存のアプリで使用する存在色ですがパフォーマンス ヒットまたは歪み、せず sRGB だけでなくで拡張範囲 sRGB で許可されて、表示内の任意の色を表す色空間スペクトルです。 このすべては、sRGB カラー スペースとして同じアンカー ポイントを引き続き維持しながら行います。

### <a name="extended-range-srgb-in-action"></a>動作の拡張の範囲 sRGB

拡張範囲 sRGB 色空間内の 0 と 1 つの外部の値の動作を表示するには、次の例を実行、表示 P3 色空間の使用可能な最も彩度の高い赤の。

[![](wide-color-images/color05.png "拡張範囲 sRGB 色空間内の 0 と 1 つの外部の値のしくみ")](wide-color-images/color05.png#lightbox)

表示 P3 としてこの色が表されます`[1.0, 0.0, 0.0]`となります拡張範囲 sRGB`[1.358, -0.074, -0.012]`です。 SRGB 値がいっぱいになるため表示 P3 の内部で含まれていると、表示 P3 値レイアウト「外部」sRGB 範囲のします。

極端な正の値から負の値を極端に移行するピクセル値を許可する物理ハードウェアの可視領域の使用可能な任意の色を表示することし、拡張範囲 sRGB 色空間でこれらの値を表すことができます。

### <a name="device-pixel-formats"></a>デバイスのピクセル形式 

色の領域が大きくされて sRGB カラー チャネルあたり 8 ビットはほとんどの場合は、8 ビットのピクセル形式を使用して標準化 sRGB の色を記述するのに十分なです。 これは完全は十分でなくとイメージを表示するメモリおよびプロセッサの使用量とのトレードオフになります。

表示 P3 は sRGB 色空間の外部の色の座標を表すことのできるため、16 ビット カラー チャネルを正しく拡張範囲 sRGB カラー スペースを持つ色を表す単位が必要です。

## <a name="system-wide-wide-color-support"></a>システム全体の幅の広い色のサポート

広色と幅の広い域 iOS 10 内および macOS Sierra を完全にサポート、Apple が拡張範囲 sRGB カラー スペースを最大限に活用しを表示 P3 を次のフレームワークを拡張します。

- (IOS のみ) 用 UIKit
- SceneKit
- コア グラフィック
- ImageIO
- Core イメージ
- WebKit
- SpriteKit
- コア アニメーション
- AppKit (用 macOS のみ)

さらに、拡張範囲 sRGB 色空間のサポートが強化されました Retina ディスプレイおよび表示 P3 を表示します。

ワイド色はサポートされているし、次のアプリケーション コンテンツの種類で使用できます。

- アプリ バンドルに含まれる静的なイメージ リソース。
- ドキュメントとネットワーク ベースのイメージ リソースを実行します。
- 写真をライブまたは RAW 形式で画像などの高度なメディアです。
- 3D グラフィックス シェーダー テクスチャの画像。

## <a name="solving-the-color-problem"></a>色の問題を解決します。

アプリに表示される内容は、さまざまな色が豊富なソースから取得できます。 さらに、このコンテンツは、幅広い種類のデバイス、それぞれの色の表示機能の範囲を独自に表示できます。

10 の iOS アプリでは、新しい組み込み、システム全体の色の管理システムを使用して、これら 2 つの問題の違いを結びます。 このシステムをイメージに、同じ外観でエンコードされたイメージの色領域に関係なく、すべての iOS デバイスことを確認します。

色の管理は、すべてのイメージが関連付けられている色空間 (またはカラー プロファイル) を開始します。 この情報は使用、_色に一致するプロセス_ソース イメージの色が出力デバイスの色に一致した場所です。 イメージのすべてのピクセルでは、色と一致する必要があります、ため時間がかかるし、デバイスの CPU に負担を配置できます。

性質により、_色に一致するプロセス_、この変換は、可能性のある「非可逆」場合は、ソース イメージよりも小さい域は、出力デバイスがあるで指定できます。

さいわいの計算に組み込ま、_色に一致するプロセス_簡単にハードウェア高速化できる (のいずれかで、CPU または GPU) して、Apple Quartz 2 D などの基本システムにサポートを組み込むことによって自動的に動作するようになりますColorSync とコア アニメーション。 正しくタグ付けされたコンテンツは、コーディングは必要ありませんこれらの機能を利用します。

色の管理は、各プラットフォームでサポートされています。

- **macOS** -macOS 以来管理されている色をされました。
- **iOS** -iOS は自動の色の管理、サポートされる iOS 9.3 (以降) ためです。

### <a name="designing-for-wide-gamut"></a>幅の広い域の設計

Apple には、次の提案の設計と幅を使用する色、iOS や macOS アプリでワイド域イメージ コンテンツ。

- ワイド域コンテンツをここでは、make のみ使用が使用できない場合が自動的にすべての場所で、アプリで検出します。
- のみを使用してワイド域コンテンツ鮮明な色が、ユーザー エクスペリエンスが強化されます。
- する必要はありません P3 を既存のアプリにすべてのコンテンツを変更します。

Apple のツール チェーンにより、広色をサポートするアプリではオール_オア_ナッシングの状況ではありませんが、段階的なオプトイン、ワイド域イメージ コンテンツのサポートします。

### <a name="upgrading-existing-content-to-wide-color"></a>広色に既存のコンテンツをアップグレードします。

Apple では、広色に既存のイメージのコンテンツをアップグレードするための以下の推奨事項があります。

- だけ"に割り当てていない"P3 プロファイル画像の編集用アプリのコンテンツ。 これにより、既存の色、イメージを変更するため、新しい領域に収まるように色を拡大などの予期しない結果に、新しい色領域へのコンテンツは単に再マップします。
- イメージのコンテンツは、アプリの編集イメージを使用して、表示 P3 プロファイルに「変換」する必要があります。

### <a name="file-formats-and-color-profiles"></a>ファイル形式とカラー プロファイル

Apple では、ファイル形式とアプリケーションのイメージの内容が広色で使用されるカラー プロファイルの次の方法があります。

- RGB 作業スペース"表示 P3"カラー プロファイルを使用します。
- カラー チャネルのモードごとに 16 ビットを使用します。
- 遅れて 2015年ラップトップのサポートを使用して (またはそれ以降) イメージのコンテンツを正確にプレビューされます。
- 埋め込みの"表示 P3"ICC プロファイルを持つ 16 ビット PNG ファイルとしてのイメージ アセットをエクスポートします。

> [!IMPORTANT]
> 使用して、 **for Web を保存**または**エクスポート資産**機能が最も一般的な画像編集ソフトウェアで見つかった_されません_ワイド カラー イメージをこれらの機能がなかったための作業まだ必要なファイル形式の仕様をサポートするために更新されます。

### <a name="supporting-wide-color-with-asset-catalogs"></a>資産カタログを含むワイドの色をサポートします。

IOS 10 と macOS Sierra、Apple が広色をサポートするために資産カタログを含めるし、アプリのバンドル内の静的イメージ コンテンツを分類するために使用を拡張します。

使用して資産カタログは、アプリに次の利点を提供します。

- 静的イメージ資産の最適な展開オプションを提供します。
- 自動の色補正をサポートしています。
- 自動ピクセル形式の最適化をサポートしています。
- アプリのスライスとは、関連する get コンテンツのみが、エンドユーザーのデバイスに配信されるようにするアプリが簡略化をサポートしています。

Apple がに対して次の機能強化資産カタログ広色のサポート。

- 16 ビット (カラー チャネルごと) のソース コンテンツをサポートしています。
- 表示の色域でカタログのコンテンツをサポートしています。 コンテンツは、sRGB または表示 P3 色域のいずれかのタグ付けすることができます。

開発者には、それぞれのアプリでワイド カラー コンテンツをサポートするための 3 つのオプションがあります。

1. **何もしない**-としてこの要件以外でもコンテンツを残しておく必要がワイド カラー コンテンツは、アプリがカラーを鮮やか (ここで、ユーザーのエクスペリエンスが強化、されます) を表示する必要がある場合にのみ使用する必要があります、ためには。 すべてのハードウェアの状況で正しく表示続行されます。
2. **既存のコンテンツを表示 P3 にアップグレード**-P3 形式で、新しいアップグレードされたファイルを使用して、アセット カタログに既存のイメージのコンテンツを交換し、資産エディターでタグを開発者が必要です。 ビルド時に、これらのアセットから sRGB 派生イメージが生成されます。
3. **資産のコンテンツの最適化を提供**-8 ビット sRGB と (正しく資産エディターでタグ付け) アセット カタログ内の各イメージの 16 ビット表示 P3 ビジョンの両方でこのような状況は、開発者は、します。

### <a name="asset-catalog-deployment"></a>アセット カタログの展開

次のことを開発者が広色イメージ コンテンツを含む資産カタログを使用してアプリ ストアにアプリを送信するとき。

- エンドユーザーに、アプリが展開されると、アプリ スライスことによりユーザーのデバイスに適切なコンテンツのバリアントのみが配信されるようにします。
- 広色をサポートしないデバイスではありませんワイド カラー コンテンツを含むペイロード コストようにデバイスを出荷ことはありません。
- `NSImage` macos Sierra (以降) が自動的にハードウェアの表示を最適なコンテンツの表示を選択します。
- または、デバイスのハードウェア特性の変更を表示する場合は、表示内容は自動的に更新されます。

### <a name="asset-catalog-storage"></a>資産カタログ ストレージ

アセット カタログの記憶域は、次のプロパティおよびアプリに影響があります。

- ビルド時に、Apple は高品質のイメージの変換を使用してイメージ コンテンツの記憶域を最適化しようとします。
- 16 ビットは、ワイド カラー コンテンツのカラー チャネルごとに使用されます。
- コンテンツの依存するイメージの圧縮を使用して、成果物のコンテンツ サイズを削減します。 コンテンツ サイズをさらに最適化するために、新しい「非可逆」の圧縮が追加されました。

## <a name="colors-in-user-interfaces"></a>ユーザー インターフェイス内の色

ユーザー インターフェイスの色を使用するときに画面上のピクセルの大半は、塗りつぶしの色です。 さらに、これらのピクセルのほとんどはイメージ資産から発生しますが、アプリで直接 (またはアプリケーションの代わりの OS で) に描画されます。

ワイド域色課題いくつか、UI レベルで作業する場合。

- **色を通信**設計者と開発者は、通常の色について説明するときに、_と見なされます_sRGB 色空間が関係しています。 色と通信する可能性があります、`rgb(128, 45, 56)`または`#FF0456`です。 幅の広い域デザインでこれらの表現が正確に指定された色を表すためには、十分な情報を提供しない、作業のカラー スペースが含まれるも場合があります。 Apple の提案を使用して`P3(128, 45, 56)`と`P3#FF0456`代わりにします。 
- **色をピッキング**- ほとんどの一般的な画像編集およびデザイン ソフトウェアに悩まさ sRGB 色空間と同じ制限が組み込みのカラー ピッカーを使用する場合。 デザイナーは必要があります広色のスタイルを使用する場合、カラー ピッカーの"表示 P3"色空間を確認します。
- **色のコーディング**両方 - `NSColor` (macOS) と`UIColor`(iOS & tvOS) P3 色を直接生成するための新しいの便利なメソッドがあり、両方が拡張範囲 sRGB カラー スペースを同様の色をサポートするために拡張されました。
- **色を格納する**-注意が必要で、アプリのドキュメントを色分けするファイルを格納するワイド域とき。 SRGB 色空間うまくカラー チャネルあたり 8 ビット、場所は、ワイド色のカラー チャネルあたり 16 ビットを使用してください。 開発者もを監視する必要があるためすべて従来 sRGB のみ)、想定した色空間のインスタンス。

## <a name="colors-on-the-web"></a>Web 上の色

広色およびワイド色の表示をサポートするデバイスで web ページを使用する場合、十分に注意してください。 場合は、web サイトに含まれているイメージ コンテンツのすべてが適切にタグが付けられて、iOS や macOS は自動的に色の一致し、正しく表示します。

メディア クエリも P3 および sRGB 対応のデバイス間での資産を解決するために使用できます。

```xml
<picture>
    <source srcset="monkey-p3.jpg" media="(color-gamut: p3)">
    <source srcset="monkey-rpg.jpg">
</picture>
```

Apple では、想定した sRGB 領域以外には、他の色空間で指定する CSS を許可する WebKit 提案もあります。

## <a name="rendering-off-screen-images-in-app"></a>アプリでの画面のイメージのレンダリング

作成されているアプリの種類に基づき、インターネットから収集した、または (たとえばアプリを描画ベクトル) のように、アプリ内で直接イメージ コンテンツを作成するイメージ コンテンツを追加するユーザーを許可する可能性がありますにします。

このような場合の両方で、アプリをレンダリングできます必要な画像 iOS プラットフォームと macOS 両方に追加された拡張機能を使用してワイドの色で画面外となります。

### <a name="drawing-wide-color-in-ios"></a>IOS で広色の描画

正しく iOS 10 に、広色イメージを描画する方法を説明する前に見て次一般的な iOS の描画コード。

```csharp
public UIImage DrawWideColorImage ()
{
    var size = new CGSize (250, 250);
    UIGraphics.BeginImageContext (size);

    ...
    
    UIGraphics.EndImageContext ();
    return image = UIGraphics.GetImageFromCurrentImageContext ();
}
```

対処する必要のある標準のコードに問題が_する前に_広色イメージを描画するために使用できます。 `UIGraphics.BeginImageContext (size)` IOS イメージの描画を開始するために使用するメソッドが次の制限事項。

- カラー チャネルあたり 8 ビット以上のイメージのコンテキストを作成できません。
- これは、拡張範囲 sRGB 色空間内の色を表すことはできません。
- コンテキストを作成する非 sRGB 色空間でバック グラウンドで呼び出されている低レベルの C ルーチンのためのインターフェイスを提供する機能はありません。

これらの制限を処理し、10、iOS でワイド色の画像の描画するには、次のコードを代わりに使用します。

```csharp
public UIImage DrawWideColorImage ()
{
    var size = new CGSize (250, 250);
    var render = new UIGraphicsImageRenderer (size);

    var image = render.CreateImage ((UIGraphicsImageRendererContext context) => {
        var bounds = context.Format.Bounds;
        CGRect slice;
        CGRect remainder;
        bounds.Divide (bounds.Width / 2, CGRectEdge.MinXEdge, out slice, out remainder);

        var redP3 = UIColor.FromDisplayP3 (1.0F, 0.0F, 0.0F, 1.0F);
        redP3.SetColor ();
        context.FillRect (slice);

        var redRGB = UIColor.Red;
        redRGB.SetColor ();
        context.FillRect (remainder);
    });

    // Return results
    return image;
}
```

新しい`UIGraphicsImageRenderer`クラスが拡張範囲 sRGB カラー スペースを処理できる新しいイメージ コンテキストを作成し、次の機能があります。

- 既定で管理されている色では完全です。
- 既定では拡張範囲 sRGB カラー スペースをサポートします。
- また、sRGB または拡張範囲 sRGB でアプリが実行されている iOS デバイスの機能に基づく色空間でレンダリングするかどうかは適切に決定します。
- 完全かつ自動的に管理してイメージのコンテキスト (`CGContext`)、開発者が呼び出すについて心配する必要がなくなりますの有効期間を開始およびコンテキスト コマンドを終了します。
- 互換性がある、`UIGraphics.GetCurrentContext()`メソッドです。

`CreateImage`のメソッド、`UIGraphicsImageRenderer`クラスが広色イメージを作成すると呼ばれ、に描画するイメージのコンテキストに完了ハンドラーに渡されます。 次のようにこの完了ハンドラー内で実行のすべての描画は。

- `UIColor.FromDisplayP3`メソッドは、ワイド域表示 P3 色領域に新しい色の彩度赤いを作成し、四角形の最初の半分の描画に使用されます。 
- 四角形の半分が描画される通常の sRGB で完全に 2 つ目には、赤色の比較が飽和状態です。

### <a name="drawing-wide-color-in-macos"></a>MacOS における広色の描画

`NSImage`クラスは、macOS ワイド カラー イメージの描画をサポートするために Sierra で展開されています。 例えば:

```csharp
var size = CGSize(250,250);
var wideColorImage = new NSImage(size, false, (drawRect) =>{
    var rects = drawRect.Divide(drawRect.Size.Width/2,CGRect.MinXEdge);
    
    var color = new NSColor(1.0, 0.0, 0.0, 1.0).Set();
    var path = new NSBezierPath(rects.Slice).Fill();
    
    color = new NSColor(1.0, 0.0, 0.0, 1.0).Set();
    path = new NSBezierPath(rects.Remainder).Fill();
    
    // Return modified
    return true;
});
```

## <a name="rendering-on-screen-images-in-app"></a>アプリでイメージを画面に表示

画像を表示するワイド カラー画面に表示される、処理 macOS と上に示した iOS の画面から外れて広色イメージの描画に似ています。

### <a name="rendering-on-screen-in-ios"></a>IOS の画面に表示

アプリは、iOS の画面に表示されるワイド色でイメージをレンダリングする必要がある、オーバーライド、`Draw`のメソッド、`UIView`通常どおり問題です。 例えば:

```csharp
using System;
using UIKit;
using CoreGraphics;

namespace MonkeyTalk
{
    public class MonkeyView : UIView
    {
        public MonkeyView ()
        {
        }

        public override void Draw (CGRect rect)
        {
            base.Draw (rect);

            // Draw the image to screen
            ...
        }
    }
}
``` 

IOS 10 と同様、 `UIGraphicsImageRenderer` sRGB または拡張範囲 sRGB なときに、アプリが実行されている iOS デバイスの機能に基づく色空間でレンダリングするかどうかは適切に決定、上に示したクラス、`Draw`メソッドが呼び出されます。 さらに、 `UIImageView` iOS 9.3 もため管理されている色がされました。

アプリのレンダリングの実行方法を知る必要があるかどうか、`UIView`または`UIViewController`、オンを確認したり、新しい`DisplayGamut`のプロパティ、`UITraitCollection`クラスです。 この値になります、`UIDisplayGamut`次の列挙型。

- P3
- Srgb
- 指定されていません。

アプリは、コントロールの色空間イメージを描画するために使用する場合、使用できる新しい`ContentsFormat`のプロパティ、`CALayer`を目的のカラー スペースを指定します。 この値を指定できます、`CAContentsFormat`次の列挙型。

- Gray8Uint
- Rgba16Float
- Rgba8Uint

### <a name="rendering-on-screen-in-macos"></a>MacOS で画面に表示

アプリで macOS 画面に表示されるワイド カラー イメージをレンダリングする場合、オーバーライド、`DrawRect`のメソッド、`NSView`通常どおり問題です。 例えば:

```csharp
using System;
using AppKit;
using CoreGraphics;
using CoreAnimation;

namespace MonkeyTalkMac
{
    public class MonkeyView : NSView
    {
        public MonkeyView ()
        {
        }

        public override void DrawRect (CGRect dirtyRect)
        {
            base.DrawRect (dirtyRect);

            // Draw graphics into the view
            ...
        }
    }
}
```

ここでも、それが適切に決定 sRGB または拡張範囲 sRGB なときに、アプリが実行されている Mac のハードウェアの機能に基づく色空間でレンダリングするかどうか、`DrawRect`メソッドが呼び出されます。

アプリは、コントロールの色空間イメージを描画するために使用する場合、使用できる新しい`DepthLimit`のプロパティ、`NSWindow`クラスが目的のカラー スペースを指定します。 この値を指定できます、`NSWindowDepth`次の列挙型。

- OneHundredTwentyEightBitRgb
- SixtyfourBitRgb
- TwentyfourBitRgb

## <a name="summary"></a>まとめ

この記事は、広色やその可能性があるおよび実装されている、Xamarin.iOS または Xamarin.Mac アプリケーション内部では使用方法について説明しました。



## <a name="related-links"></a>関連リンク

- [iOS 10 サンプル](https://developer.xamarin.com/samples/ios/iOS10/)
