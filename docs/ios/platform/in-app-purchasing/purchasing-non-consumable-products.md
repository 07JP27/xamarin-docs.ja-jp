---
title: "使用できる非製品の購入"
ms.topic: article
ms.prod: xamarin
ms.assetid: 635D9CA2-6BCA-53E1-7B10-968029AA3493
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/18/2017
ms.openlocfilehash: f5fbd2282dc2f1d5e9a3fa6d29e7b74fde89fc42
ms.sourcegitcommit: 6cd40d190abe38edd50fc74331be15324a845a28
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/27/2018
---
# <a name="purchasing-non-consumable-products"></a>使用できる非製品の購入

非が使用できる製品は、' 所有 ' 顧客です。 これらが常にアクセスできるようには、自分のデバイスが紛失または盗難にあったか、新しいを買う場合でもは予想されます。 これらは、ブック、雑誌の問題、ゲームのレベル、写真のフィルター、"pro の機能などに役立ちます。ユーザーが使用できる非製品を購入すると、お支払いについては、もう一度があることはありません。 誤って、コードでは再試行することができ、StoreKit で既に購入されているメッセージが表示されます。

## <a name="non-consumable-products-sample"></a>使用できる非製品サンプル

[InAppPurchaseSample コード](https://developer.xamarin.com/samples/monotouch/StoreKit/)と呼ばれるプロジェクトを含む*NonConsumables*です。 サンプル コードでは、例としてフォト フィルターを使用して非が使用できる製品を実装する方法を示します。 フィルターを購入した後を繰り返し、写真に適用できます。 再購入する必要はありません。   
   
   
   
 この一連のスクリーン ショット: で、発注プロセスを示す、**購入**ボタン機能をアクティブ化ボタンに変わります。   
   
   
   
 [ ![](purchasing-non-consumable-products-images/image34.png "発注プロセスは、この一連のスクリーン ショットに表示されます。")](purchasing-non-consumable-products-images/image34.png)   
   
   
   
 購入プロセスと同じ消耗製品です。主な違いは、アプリケーション コードで、注文書を追跡する方法です。 購入ボタンは、のみ、この例では、製品が購入されていない場合は使用できます。 それ以外の場合、ボタンをアクティブに機能自体。   
   
   
   

次の図は、クラスと App Store サーバーが使用できる非商品を購入を実行する間の相互作用を示しています。   
   
   
   
 [ ![](purchasing-non-consumable-products-images/image35.png "クラスと App Store サーバー以外が使用できる製品を実行する間の相互作用の購入します。")](purchasing-non-consumable-products-images/image35.png)   
   
   
   
 主な違いの消耗の例は、購入手続きが完了したら、ユーザー インターフェイスが再購入を防ぐために更新されています。 この例では、成功したトランザクションの更新プログラムの通知ユーザー インターフェイスを**購入**ボタンは、機能自体をアクティブにするボタンに変換します。

## <a name="re-purchasing-non-consumable-products"></a>再使用できる非製品の購入

コードは、非表示にするか、製品が正常に購入すると、一度製品を購入しようとしてから、ユーザーを防ぐために後購買ボタンの用途を変更する必要があります通常します。 サンプル アプリケーションは、変更することによって、**購入**例フォト フィルターは作業のボタンにボタンをクリックします。   
   
   
   
 アプリケーションが使用できる非製品が購入済みであるかどうかを判断できません状況があります。

-  場合は、アプリケーションが削除され、デバイスに再インストールされている、すべての購入レコードが失われます (しない限り、/、ユーザーがバックアップ復元を実行するまでなど)。 
-  場合、ユーザーはアプリケーションは 2 つ (以上) のデバイスにインストールされているし、デバイスの 1 つで買い物をします。 その他のデバイスは引き続き表示、製品を購入します。 
-  顧客が再度このような状況で使用できる非製品を購入しようとすると、App Store は無料でもう一度製品を満たします。 ユーザー インターフェイスは、購入を実行する最初に表示されます (たとえば、確認のアラートが表示されますおよび Apple ID が必要になります) ただし、ユーザーは、製品が購入済みであることを通知メッセージを表示します。  
   
   
   
 このシナリオでは、コード パスは、正規の注文書と同じでは正確に、唯一の違い。

-  ユーザーは、製品の再度課金取得はされません。
-  `SKPaymentTransaction`アプリケーションに渡されたオブジェクトには、`OriginalTransaction`最初に、製品の購入時に生成されたトランザクションを参照するプロパティです。 
-  非が使用できる製品を販売しているアプリケーションは、StoreKit のも実装する必要があります**復元**既存の購入を取得するユーザーを支援する機能。 
