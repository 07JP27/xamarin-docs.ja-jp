---
title: ".xib コード生成"
ms.topic: article
ms.prod: xamarin
ms.assetid: 365991A8-E07A-0420-D28E-BC4D32065E1A
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/21/2017
ms.openlocfilehash: 7d320b3fc40c852c337e5fd1e9bda4e90920cf70
ms.sourcegitcommit: cc38757f56aab53bce200e40f873eb8d0e5393c3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2018
---
# <a name="xib-code-generation"></a>.xib コード生成

> [!IMPORTANT]
>  このドキュメントでは、Visual Studio を説明の Xcode のインターフェイスのビルダーのみ、Mac の統合操作とコンセントで使用されないため、Xamarin デザイナー iOS 用です。 IOS デザイナーの詳細についてを参照してください、 [iOS デザイナー](~/ios/user-interface/designer/index.md)ドキュメント。

Apple インターフェイス ビルダー ツール ("IB") は、ユーザー インターフェイスを視覚的にデザインを使用できます。 IB によって作成されたインターフェイス定義に保存**.xib**ファイル。 ウィジェットとその他のオブジェクトで**.xib**ファイル指定できるは、"クラス id"、カスタムのユーザー定義型を指定できます。 これにより、ウィジェットの動作をカスタマイズして、カスタムのウィジェットを書き込むことができます。

これらのユーザー クラスは、通常、UI のコント ローラー クラスのサブクラスです。 ある*コンセント*(プロパティと似ています) と*アクション*(イベントに似ています) インターフェイス オブジェクトに接続されていることができます。 実行時に、IB ファイルが読み込まれるときに、オブジェクトが作成され、コンセントと操作に接続しているさまざまな UI オブジェクトに動的にします。 これらのマネージ クラスを定義するときに、すべてのアクションと IB ものと想定するものと一致するコンセントを定義する必要があります。 Mac 用の visual Studio では、分離コードのようなモデルを使用して、これを簡略化します。 これは Xcode は、OBJECTIVE-C 向けに似ていますが、コード生成モデルと規則は、.NET 開発者にとって馴染みのあるを微調整していた。

扱う**.xib**ファイルは現在サポートされていませんで Xamarin.iOS for Visual Studio です。

## <a name="xib-files-and-custom-classes"></a>.xib ファイルおよびカスタム クラス

カスタムの型を定義することは Cocoa タッチからの既存の型を使用するだけでなく**.xib**ファイル。 その他で定義されている型を使用することも**.xib**ファイル、または純粋な c# コードで定義されています。 現時点では、インターフェイスのビルダー、現在の外部で定義された型の詳細を認識しない**.xib**ファイル、それらを一覧表示または、カスタムのコンセントとアクションを表示できないようにします。 この制限を削除すると、以降の予定です。

カスタム クラスを定義することができます、 **.xib**ファイル インターフェイス ビルダーの「クラス」 タブで「追加サブクラス」コマンドを使用します。 私たちは、このような「分離コード」クラス参照してください。 場合、 **.xib**ファイルは、". xib.designer.cs"し、Visual Studio for Mac、プロジェクト内の対応するファイルが自動的に入力が内のすべてのカスタム クラスの部分クラス定義を含む、 **.xib**です。 これらの部分クラスを「デザイナー クラス」と呼びます。

## <a name="generating-code"></a>コードの生成

いずれかの**{0} .xib**ファイルのビルド アクションで*ページ*場合は、 **{0}.xib.designer.cs**ファイルがプロジェクトにも存在する、Visual Studio for Mac が部分クラスを生成する、内で見つかったユーザー クラスのすべてのデザイナー ファイル、 **.xib**コンセントのプロパティと部分メソッドのすべてのアクションを持つファイルです。 このファイルが存在するだけでは、コードの生成が有効です。

デザイナーのファイルが自動的に更新されたときに、 **.xib** Mac が再度フォーカスの変更と Visual Studio のファイルです。 デザイナーのファイルは変更できません、手動で変更は、ファイルに上書き次回 Visual Studio for Mac 更新プログラムにあります。

## <a name="registration-and-namespaces"></a>登録および名前空間

Visual Studio for Mac は、通常の .NET プロジェクト namespacing と一致させることをデザイナー ファイルの場所、プロジェクトの既定の名前空間を使用したデザイナー クラスを生成します。 デザイナーのファイルの名前空間は、プロジェクトの「既定の名前空間」と「.NET の名前付けポリシー」設定によって決まります。 あるプロジェクトの既定の名前空間が変更された場合 MD が再生成されます新しい名前空間のクラス、部分クラスが不要になった一致する場合がありますので注意してください。

Objective C のランタイムによって、クラスを検出できるようにすると、Visual Studio for Mac が適用されます、`[Register (name)]`属性クラスにします。 Xamarin.iOS が自動的に登録が`NSObject`-派生クラスでは、.NET の完全修飾名を使用します。 使用される名前を持つクラスごとに Mac のオーバーライドの Visual Studio によって適用された属性が登録されている、 **.xib**ファイル。 Visual Studio for Mac を使用して、デザイナーのファイルを生成することがなく IB でカスタム クラスを使用する場合は、マネージ クラスに対して予期される Objective C のクラス名を一致させるようにするには、手動で適用する必要があります。

1 つ以上のクラスを定義することはできません**.xib**、競合するか。

## <a name="non-designer-class-parts"></a>デザイナー以外のクラスの部分

デザイナーの部分クラスとして使用するものではありません-はします。 コンセントはプライベートであり、基底クラスが指定されていません。 各クラスが、対応する「デザイナーではない」クラスの一部を別のファイル、クラスを基本設定を使用または、コンセントを公開し、を読み込むときに、ネイティブコードからクラスをインスタンス化するために必要なコンストラクターを定義する必要があると想定されます**.xib**です。 既定値**.xib**テンプレートは内の他のカスタム クラスを定義する、 **.xib**、デザイナー以外の一部を手動で追加する必要があります。

この理由は、柔軟性が必要です。 たとえば、複数の分離コード クラスには、共通の管理抽象クラス、どのサブクラス IB をサブクラス化されるクラスのサブクラスが可能性があります。

これら配置には、 **{0}.xib.cs**の横にあるファイル、 **{0}.xib.designer.cs**デザイナー ファイル。

<a name="generated" />

## <a name="generated-actions-and-outlets"></a>生成されたアクションとコンセントと

部分のデザイナー クラスでは、Visual Studio for Mac は IB、および接続されているアクションに対応する部分メソッドで定義されている任意の接続されたコンセントに対応するプロパティを生成します。

### <a name="outlet-properties"></a>コンセント プロパティ

デザイナー クラスには、カスタムのクラスで定義されているすべてのコンセントに対応するプロパティが含まれます。 これらは、プロパティは遅延バインディングを有効に Objective C のブリッジに Xamarin.iOS の実装の詳細です。 分離コード クラスからのみ使用するためのプライベート フィールドに相当することを検討する必要があります。 公開できるようにする場合は、他の任意のプライベート フィールドの場合と同様、非デザイナー クラス部分にアクセサー プロパティを追加します。

型を持つコンセント プロパティが定義されているかどうかは`id`(に相当`NSObject`) デザイナー コード ジェネレーターは、便宜上、その電源コンセントに接続されているオブジェクトに基づく最も強力な可能な型を現在を決定し、します。
ただし、この可能性があるサポートされていません、将来のバージョンでためカスタム クラスを定義するときに明示的に強く、コンセントを入力することをお勧めします。

### <a name="action-properties"></a>アクションのプロパティ

デザイナー クラスには、カスタムのクラスで定義されているすべてのアクションに対応する部分のメソッドが含まれます。 これらは、メソッドは実装されていません。 部分メソッドの目的は、2 つです。

1.  入力した場合`partial`デザイナー以外のクラスの一部のクラス本体、Visual Studio for Mac を提供しオートコンプリートにすべての非実装の部分メソッドのシグネチャ。
2.  部分メソッドのシグネチャは、対応するアクションとして処理されるを取得できるように、OBJECTIVE-C 世界を公開する属性を適用を持ちます。


場合は、部分のメソッドを無視する他のメソッドに属性を適用することで、アクションを実装および、フォール スルーする基本クラスにそのまたは可能性があります。

送信者の種類をアクションが定義されているかどうかは`id`(に相当`NSObject`)、デザイナー コード ジェネレーターが現在されたアクションに接続されているオブジェクトに基づいた最も強い可能な型を決定し、します。 ただし、この可能性があるサポートされていません、将来のバージョンでためカスタム クラスを定義するときに明示的に強くアクションを入力することをお勧めします。

CodeDOM をサポートしていない部分メソッドは、その他の言語は生成されませんのでためだけの C# の場合、これらの部分メソッドが作成されたことに注意してください。

## <a name="cross-xib-class-usage"></a>クロス XIB クラスの使用方法

場合によっては、ユーザーが複数の同じクラスを参照する**.xib**ファイル、タブのコント ローラーと例を示します。 これを明示的に別のクラス定義を参照している**.xib**ファイル、または、同じクラス名を定義する、2 番目にもう一度**.xib**です。

後者の場合は Mac 処理のための Visual Studio により問題となる**.xib**ファイルを個別にします。 自動的に検出して、同じ部分クラスが複数のデザイナー ファイルで定義されている場合は、複数回登録属性の適用が競合終了する可能性がありますので、重複する定義をマージ、ことはできません。 Visual Studio for Mac の最新バージョンは、この問題を解決しようとしていますが、ことが常に正常に動作しません。 これはサポートされていないになる可能性があります将来的に、Mac 用の Visual Studio がすべてで定義されたすべての型を作成する代わりに**.xib**ファイルとマネージ コードから直接表示のプロジェクトで**.xib**ファイル。

## <a name="type-resolution"></a>型の解決

IB で使用される型は、Objective C 型名です。 これらは、登録属性を使用して CLR 型にマップされます。 コンセントと操作のコードを生成するときに Visual Studio for Mac が Xamarin.iOS コアによってラップされたすべての Objective C 型に対応する CLR 型を解決して、型名を完全に修飾します。

ただし、ため、このような場合が出力にもそのままの型名、コード ジェネレーターはユーザー コードまたはライブラリに Objective C 型名から CLR 型を解決現在ことはできません。 つまり、対応する CLR 型が Objective C 型と同じ名前に設定してそれを使用するコードと同じ名前空間である必要があります。 これは、将来的にコード生成中に、プロジェクト内のすべての Objective C 型を考慮してしばらく修正される予定です。
